<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>skinview</title>
    <!-- credits to 811 Alex for the skinviewer (I modified it) -->
    <link rel="stylesheet" type="text/css" href="skinviewstyle/styles.css">
    <link rel="stylesheet" href="skinviewstyle/minecraft-skinviewer.css">
    <script>
      const baseTag = document.createElement('base');
      if (window.location.hostname != '127.0.0.1') {
          baseTag.href = '/Eaglercraft-1.13-Web/';
          console.log('not on live server')
      } else {
          baseTag.href = '/';
      }
      document.head.appendChild(baseTag);
    </script>
  <body>
    <div id="content">
      <div id="container-left">
        <div id="container-3d-viewers">
          <button type="button" class="viewer-pause-btn steve"></button>
          <div id="skin-viewer-3d-steve" class="steve skin-viewer-3d mc-skin-viewer-10x"></div>
          <div class="separator-steve-alex separator-3d-viewers"></div>
          <div id="skin-viewer-3d-alex" class="alex skin-viewer-3d mc-skin-viewer-10x slim"></div>
          <button type="button" class="viewer-pause-btn alex"></button>
          <span class="no3d hidden note">3D skinview deactivated</span>
        </div>
        <div id="container-3d-viewer-labels" style="display: none;">
          <span id="skin-viewer-3d-steve-label" class="steve">Steve</span>
          <span id="skin-viewer-3d-alex-label" class="alex">Alex</span>
        </div>
        <div id="container-bottom">
          <form id="container-bottom-left" class="container-v" autocomplete="off">
            <!-- IMPORT SKIN DIV HERE -->
            <div style="display: none;">
              <label for="fileElem">Select your skin:</label>
              <input type="file" id="fileElem" accept="image/png">
            </div>
            <!-- IMPORT SKIN DIV HERE -->
            <div>
              <div>
                <input type="button" id="s2aSButton" class="procBtn" value="Squeeze" disabled title="Get rid of half of the middle section" style="display: none;">
                <input type="button" id="s2aCButton" class="procBtn" value="Cut" disabled title="Get rid of the excess on the right" style="display: none;">
                <input type="button" id="s2aSHDButton" class="procBtn procBtnHD hidden" value="HD Squeeze" disabled title="Scale down the front, back, top & bottom sides of the arms">
                <input type="button" id="s2aSFHDButton" class="procBtn procBtnHD hidden" value="HD Full Squeeze" disabled title="Scale down the entirety of the arms">
              </div>
            </div>
            <div>
              <div>
                <input type="button" id="a2sSButton" class="procBtn" value="Stretch" disabled title="Double the width of the middle section" style="display: none;">
                <input type="button" id="a2sFButton" class="procBtn" value="Fill" disabled title="Double the width of the section on the right" style="display: none;">
                <input type="button" id="a2sCButton" class="procBtn" value="Circular" disabled title="Copy the section on the left to the right side" style="display: none;">
                <input type="button" id="a2sSHDButton" class="procBtn procBtnHD hidden" value="HD Stretch" disabled title="Scale up the front, back, top & bottom sides of the arms">
                <input type="button" id="a2sSFHDButton" class="procBtn procBtnHD hidden" value="HD Full Stretch" disabled title="Scale up the entirety of the arms">
              </div>
            </div>
            <div>
              <label id="HDMode" class="invisible">HD mode</label>
              <div>
                <input type="button" id="resetButton" class="ActionBtn" value="Reset" disabled style="display: none;">
                <input type="button" id="saveButton" class="ActionBtn" value="Save" disabled style="display: none;">
              </div>
            </div>
          </form>
          <div id="container-bottom-right" style="display: none;">
            <form id="viewer-visibility" autocomplete="on">
                <input type="checkbox" id="show3dSteve" checked>
                <label for="show3dSteve">Show 3D Steve</label><br />
                <input type="checkbox" id="show3dAlex">
                <label for="show3dAlex">Show 3D Alex</label><br />
                <input type="checkbox" id="show2dViewer">
                <label for="show2dViewer">Show 2D Viewer</label><br />
            </form>
            <form id="extra-options" autocomplete="on">
                <input type="checkbox" id="adjustCheckered" title="Resize checkerboard pattern, when using HD skins, according to pixel size">
                <label for="adjustCheckered">Adjust 2D background</label><br />
            </form>
        </div>

          <script>
            window.addEventListener('message', function(event) {
                if (event.data === 'updateSkin') {
                    const skinType = localStorage.getItem('skin_type');
        
                    if (skinType === 'steve') {
                        document.getElementById('show3dSteve').checked = true;
                        document.getElementById('show3dAlex').checked = false;
                        
                        document.getElementById('show3dSteve').dispatchEvent(new Event('change'));
                        document.getElementById('show3dAlex').dispatchEvent(new Event('change'));
                    } else if (skinType === 'alex') {
                        document.getElementById('show3dSteve').checked = false;
                        document.getElementById('show3dAlex').checked = true;
                        
                        document.getElementById('show3dSteve').dispatchEvent(new Event('change'));
                        document.getElementById('show3dAlex').dispatchEvent(new Event('change'));
                    }
                }
            }, false);
        </script>
        </div>
      </div>
      <div id="container-2d-viewer" class="skin">
        <img id="skin-viewer-2d" class="pixelart checkered" alt="Waiting for skin to be chosen..." src="">
        <div id="container-2d-viewer-resize-corner"></div>
      </div>
    </div>
    <script type="module" src="scripts/skinview.js"></script>
  </body>
</html> 
